let warning_passive_network =  {        data:function(){            return{                totalNum:'',                currentNum:'',                shequList:[],                peopleList:[],                linechart:[],                linechartName:[],                nameArr:[],                valArr:[],                percent:[],            }        },        template:`<div class="judge-center">                    <div class="judge-center-header">                        <div class="judge-center-title"><span class="title-name blueShadow-big-title">消极网格员预警</span>                        <span class="title-btn" @click="quezhi()"><i class="xb_icon info-circle"></i></span></div>                    </div>                    <!--中间主体内容-->                    <div class="judge-center-main">                                               <div class="index_top society_top" >                            <div class="early_warning">                                <img class="early_warning_img" src="${baseUrl}/public/biz/warning/image/warn_red_light.png">                                <img class="early_warning_img2" src="${baseUrl}/public/biz/warning/image/warn_red_bg.png">                                <div class="early_warning_right society_warning_right">                                    <div class="early_warning_num">{{currentNum}}</div>                                    <div class="early_warning_name">当前预警 </div>                                </div>                                </div>                            <div class="early_warning">                                <img class="early_warning_img" src="${baseUrl}/public/biz/warning/image/warn_blue_light.png">                                <img class="early_warning_img2" src="${baseUrl}/public/biz/warning/image/warn_blue_bg.png">                                <div class="early_warning_right  society_warning_right">                                    <div class="early_warning_num">{{totalNum}}</div>                                    <div class="early_warning_name">预警总数 </div>                                </div>                                </div>                            <div class="early_warning"><div class="early_warning_btn" @click="workPingtai()"></div></div>                        </div>                        <div class="society_mid">                             <div class=" society_tab">                                   <i class="xb_icon map  font-blue" @click="tabChart(0)"></i>                                   <i class="xb_icon chart-area"  @click="tabChart(1)"></i>                             </div>                              <div class="society_map map_wapper_mask" id="society_map">                             </div>                                <div class="society_chart">                                <div class="society_chart_left">                                    <div class="society_title">消极网格员预警统计</div>                                    <div class="rank-tab" style="margin-top:5px">                                        <div class="rank-tab-item ac" @click="tabTo(0)">人员</div>                                        <div class="rank-tab-item" @click="tabTo(1)">社区</div>                                    </div>                                    <img class="grid-people" @click="gridAndprople()" src="${baseUrl}/public/biz/index/image/home_btn_icon_deep.svg">                                    <div class="society_cont1">                                        <div class="society_content font-blue font-weight">                                            <div class="society_content_item">人员名称</div>                                            <div class="society_content_item">当前预警数</div>                                            <div class="society_content_item">总预警数</div>                                        </div>                                        <div class="society_cont_cont">                                            <div class="society_content" v-for="(item,index) in peopleList">                                                <div class="society_content_item">{{item.showName}}</div>                                                <div class="society_content_item" :class="{'font-yellow':item.num>0}">{{item.currentNum}}</div>                                                <div class="society_content_item">{{item.totalNum}}</div>                                                <div class="society_content_btn" @click="person(item.name)" ><img src="${baseUrl}/public/biz/index/image/home_btn_icon_deep.svg"></div>                                            </div>                                        </div>                                    </div>                                    <div class="society_cont2" style="display: none">                                        <div class="society_content font-blue font-weight">                                            <div class="society_content_item">社区名称</div>                                            <div class="society_content_item">当前预警数</div>                                            <div class="society_content_item">总预警数</div>                                        </div>                                        <div class="society_cont_cont">                                            <div class="society_content" v-for="(item,index) in shequList">                                                <div class="society_content_item">{{item.name}}</div>                                                <div class="society_content_item" :class="{'font-yellow':item.num>0}">{{item.currentNum}}</div>                                                <div class="society_content_item">{{item.totalNum}}</div>                                                <div class="society_content_btn"  @click="shequ(item.name)"><img src="${baseUrl}/public/biz/index/image/home_btn_icon_deep.svg"></div>                                            </div>                                        </div>                                    </div>                                </div>                                <div class="society_chart_right">                                    <div class="society_title">消极网格员预警近1年走势</div>                                    <div class="society_line" id="society_line"></div>                                </div>                             </div>                                                           </div>                                                                      </div>                                                   </div> `,        mounted:function(){            if(window.p!=null){                window.p.close();            }            let _this=this;            _this.mapObj = new AMap.Map('society_map', {                center: [120.730148,31.149666],                dragEnable:false,                zoomEnable:false,                keyboardEnable:false,                defaultCursor:'default',                zoom: 12.4,                viewMode:'3D',                pitch:0,                mapStyle:'amap://styles/72afe2e680614da5b49ae790fd652f5d',            });            _this.mapObj.on('complete',function(){                $('#society_map').removeClass('map_wapper_mask');            });//预警数            ajax_jsonp_request({                url: common_module_conf.project_conf.show.host+'/api/analysis/warning/numSurvey',                post_data:{warningType:12},                fn:function(data){                    _this.totalNum=data.totalNum;                    _this.currentNum=data.num;                }            });//列表            ajax_jsonp_request({                url: common_module_conf.project_conf.show.host+'/api/analysis/warning/negativeStatistical',                post_data:{switchCond:1},                fn:function(data){                    _this.peopleList=data.list;                }            });            ajax_jsonp_request({                url: common_module_conf.project_conf.show.host+'/api/analysis/warning/negativeStatistical',                post_data:{switchCond:2},                fn:function(data){                    _this.shequList=data.list;                }            });// 折线图            ajax_jsonp_request({                url:common_module_conf.project_conf.show.host+'/api/analysis/warning/negativeTrend',                fn:function(data){                    $.each(data.trendList,function (i,n) {                        _this.nameArr.push(n.name);                        _this.valArr.push(n.value);                       // _this.percent.push(n.percent)                    });                },            });//网格            ajax_jsonp_request({                url: common_module_conf.project_conf.show.host+'/api/analysis/warning/negativePoint',                fn:function(data){                    jichuGrid.draw(_this.mapObj,data.list);                    warningMarker.draw(_this.mapObj,data.list,1,true);                }            });            textMarker.draw(_this.mapObj,textArr[0])        },        methods: {            workPingtai:function(){                var p = pop.view({                    width: 1780,                    height: 960,                    hideTitle: true,                    zdy_class: 'general_full community_detail_pop',                    filterContainer: '.filter_dom',                    content: '',                    success: function () {                        let request_params = {                            startTime: "",                            endTime: "",                            status: "1,2,3",                            type: "12",                            offset:0,                            community:'1',                        };                        ajax_jsonp_request({                            url:common_module_conf.project_conf.show.host+'/api/analysis/warning/list',                            post_data:request_params,                            fn:function(data){                                workdetialpop.init(p.$ow_open_cont,data,request_params,true,false)                            }                        })                    }                })            },            tabChart:function (tabId) {                let _this = this;                if(tabId==0){                    $('.chart-area ').removeClass('font-blue');                    $('.map ').addClass('font-blue');                    $('.society_map').show();                    $('.society_chart').hide();                }                else{                    $('.map ').removeClass('font-blue');                    $('.chart-area ').addClass('font-blue');                    $('.society_map').hide();                    $('.society_chart').show();                    //折线图                    let myChart=echarts.init(document.getElementById('society_line'));                    let option={                        tooltip:{                            trigger: 'axis',                            formatter: function (params) {                                var res = params[0].name +"月"+' : ' + params[0].value + "件"+'<br/>';                                return res;                            }                        },                        grid:{                          top:20,                        },                        xAxis: {                            splitLine:{show: false},//去除网格线                            type: 'category',                            axisTick: {                                show: false                            },                            axisLabel: {                                show: true,                                textStyle: {                                    color: '#fff',                                    fontSize:20,                                    baseline: 'top'                                }                            },                            axisLine: {                                lineStyle:{                                    color:'#fff',                                    width:2                                }                            },                            data: _this.nameArr,                        },                        yAxis: [{                            splitLine:{show: false},//去除网格线                            type:'value',                            axisTick: {                                show: false                            },                            axisLine: {                                show: true,                                lineStyle:{                                    color:'#fff',                                    width:2                                }                            },                            axisLabel: {                                show: true,                                textStyle: {                                    color:'#fff',                                    baseline: 'top'                                }                            },                        },{                            axisLine: {                                show: false,                            },                            axisTick: {                                show: false                            },                            splitLine:{                                show: false                            },                      //去除网格线                            axisLabel: {                                show: false,                            },                            type:'value',                        }],                        series: [{                            data:_this.valArr,                            yAxisIndex:0,                            itemStyle:{                                normal:{                                    color:'rgb(255,196,106)',                                },                            },                            barWidth:30,                            type:'bar',                        },{                            data:_this.valArr,                            yAxisIndex:1,                            itemStyle : {                                normal : {                                    lineStyle:{                                        width:8,                                        color:'rgb(1,174,253)',                                    }                                }                            },                            symbolSize: 20,//拐点大小                            type:'line',                        }]                    };                    myChart.clear();                    myChart.setOption(option);                }            },            tabTo:function(num){                if(num==1){                    $('.rank-tab-item').removeClass('ac');                    $('.rank-tab-item').eq(1).addClass('ac');                    $('.society_cont2').show();                    $('.society_cont1').hide();                }else{                    $('.rank-tab-item').removeClass('ac');                    $('.rank-tab-item').eq(0).addClass('ac');                    $('.society_cont2').hide();                    $('.society_cont1').show()                }            },//列表社区排名            shequ:function (code) {                gridRank.init(code);            },//列表个人详情            person:function(code){                var p = pop.view({                    width: 1780,                    height: 960,                    hideTitle: true,                    zdy_class: 'general_full',                    filterContainer: '.filter_dom',                    content: '',                    success: function () {                        ajax_jsonp_request({                            url:common_module_conf.project_conf.show.host+'/api/analysis/warning/negativeDetailsToHead',                            post_data:{                                code:code,                            },                            fn:function(data){                                GridPop.init(p.$ow_open_cont,data,code)                            }                        });                    }                });            },//阈值说明            quezhi:function () {                let _this=this;                var p = pop.view({                    width: 1780,                    height: 960,                    hideTitle: true,                    zdy_class: 'general_full',                    filterContainer: '.filter_dom',                    content: '',                    success: function () {                        _this.quzhiDetail(p.$ow_open_cont)                    }                })            },            quzhiDetail:function ($dom) {                    let tpl=`<div class="bigPop-head">                       <div class="bigPop-head-left">                            <div class="blueShadow-big-title">消极网格员预警模型</div>                       </div>                       <div class="quzhi-popDetail">阈值设置</div>                      </div>                    <div class="quzhiPop-con">                        <div class="quzhi-top">                                                        <div class="quzhi-top-list ac-boxshadow" data-id="1">                                <div class="quzhi-list-title" style="color:#FACD89">数据源选取 <img src="${baseUrl}/public/biz/warning/image/warn_sel_one.png" class="numBgImg"></div>                                <div class="quzhi-list-cont">针对所有巡查员，选取上个月所有个人得分数据作为模型构建的总数据集合</div>                                <div class="panel-corner anjian-topLeft"><svg id="" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 20 20" xml:space="preserve"><path d="M15.4,5.5h-2.9c-5,0-6,1-6,6v4.9H4.6v-4.9C4.6,6,7,3.6,12.5,3.6h2.9V5.5z" fill="#0099df"></path></svg></div><div class="panel-corner anjian-topRight"><svg id="" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 20 20" xml:space="preserve"><path d="M15.4,5.5h-2.9c-5,0-6,1-6,6v4.9H4.6v-4.9C4.6,6,7,3.6,12.5,3.6h2.9V5.5z" fill="#0099df"></path></svg></div><div class="panel-corner anjian-boLeft"><svg id="" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 20 20" xml:space="preserve"><path d="M15.4,5.5h-2.9c-5,0-6,1-6,6v4.9H4.6v-4.9C4.6,6,7,3.6,12.5,3.6h2.9V5.5z" fill="#0099df"></path></svg></div><div class="panel-corner anjian-boRight"><svg id="" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 20 20" xml:space="preserve"><path d="M15.4,5.5h-2.9c-5,0-6,1-6,6v4.9H4.6v-4.9C4.6,6,7,3.6,12.5,3.6h2.9V5.5z" fill="#0099df"></path></svg></div>                            </div>                            <img src="${baseUrl}/public/biz/warning/image/warn_icon_arrowr.png" class="right_log">                            <div class="quzhi-top-list" data-id="2">                                <div class="quzhi-list-title">最优分割 <img src="${baseUrl}/public/biz/warning/image/warn_sel_two.png" class="numBgImg"></div>                                <div class="quzhi-list-cont">运用大数据聚类算法，将历史数据划分为不同等级，体量相似的数据聚在一起</div>                                <div class="panel-corner anjian-topLeft"><svg id="" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 20 20" xml:space="preserve"><path d="M15.4,5.5h-2.9c-5,0-6,1-6,6v4.9H4.6v-4.9C4.6,6,7,3.6,12.5,3.6h2.9V5.5z" fill="#0099df"></path></svg></div><div class="panel-corner anjian-topRight"><svg id="" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 20 20" xml:space="preserve"><path d="M15.4,5.5h-2.9c-5,0-6,1-6,6v4.9H4.6v-4.9C4.6,6,7,3.6,12.5,3.6h2.9V5.5z" fill="#0099df"></path></svg></div><div class="panel-corner anjian-boLeft"><svg id="" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 20 20" xml:space="preserve"><path d="M15.4,5.5h-2.9c-5,0-6,1-6,6v4.9H4.6v-4.9C4.6,6,7,3.6,12.5,3.6h2.9V5.5z" fill="#0099df"></path></svg></div><div class="panel-corner anjian-boRight"><svg id="" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 20 20" xml:space="preserve"><path d="M15.4,5.5h-2.9c-5,0-6,1-6,6v4.9H4.6v-4.9C4.6,6,7,3.6,12.5,3.6h2.9V5.5z" fill="#0099df"></path></svg></div>                            </div>                            <img src="${baseUrl}/public/biz/warning/image/warn_icon_arrowr.png" class="right_log">                            <div class="quzhi-top-list" data-id="3">                                <div class="quzhi-list-title">阈值确定 <img src="${baseUrl}/public/biz/warning/image/warn_sel_three.png" class="numBgImg"></div>                                <div class="quzhi-list-cont">体量最大群落下限为初步阈值，在此基础上，结合经验微调阈值到最优</div>                                <div class="panel-corner anjian-topLeft"><svg id="" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 20 20" xml:space="preserve"><path d="M15.4,5.5h-2.9c-5,0-6,1-6,6v4.9H4.6v-4.9C4.6,6,7,3.6,12.5,3.6h2.9V5.5z" fill="#0099df"></path></svg></div><div class="panel-corner anjian-topRight"><svg id="" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 20 20" xml:space="preserve"><path d="M15.4,5.5h-2.9c-5,0-6,1-6,6v4.9H4.6v-4.9C4.6,6,7,3.6,12.5,3.6h2.9V5.5z" fill="#0099df"></path></svg></div><div class="panel-corner anjian-boLeft"><svg id="" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 20 20" xml:space="preserve"><path d="M15.4,5.5h-2.9c-5,0-6,1-6,6v4.9H4.6v-4.9C4.6,6,7,3.6,12.5,3.6h2.9V5.5z" fill="#0099df"></path></svg></div><div class="panel-corner anjian-boRight"><svg id="" xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 20 20" xml:space="preserve"><path d="M15.4,5.5h-2.9c-5,0-6,1-6,6v4.9H4.6v-4.9C4.6,6,7,3.6,12.5,3.6h2.9V5.5z" fill="#0099df"></path></svg></div>                            </div>                        </div>                        <div class="quzhi-bottom select">                            <div class="quzhi-bottom-list">                                <div class="quzhi-bottom-title">                                 <div class="society_title">前一月所有巡查员得分</div>                                 </div>                                <div class="quzhi-bottom-cont"><img src="${baseUrl}/public/biz/warning/image/warn_grid_allscore.png"> </div>                            </div>                            <div class="quzhi-bottom-list" style="display: none">                                <div class="quzhi-bottom-title">                                 <div class="society_title">分割成若干数据群落</div>                                </div>                                <div class="quzhi-bottom-cont"><img src="${baseUrl}/public/biz/warning/image/warn_sandian_def.png"></div>                            </div>                            <div class="quzhi-bottom-list" style="display: none">                                <div class="quzhi-bottom-title">                                 <div class="society_title">找到最佳预警阈值</div>                                </div>                                <div class="quzhi-bottom-cont"><img src="${baseUrl}/public/biz/warning/image/warn_sandian_sel.png"></div>                            </div>                        </div>                    </div>`;                    $dom.html(tpl);                $dom.find('.quzhi-top-list').click(function () {                    $('.quzhi-top-list').removeClass('ac-boxshadow');                    $('.quzhi-bottom-list').hide();                    var index=$(this).data('id');                    if(index==1){                        $('.quzhi-bottom.select').find('.quzhi-bottom-list').eq(0).show();                        $('.quzhi-top-list').eq(0).addClass('ac-boxshadow').find('.quzhi-list-title').css('color','#FACD89')                    }else if(index==2){                        $('.quzhi-bottom.select').find('.quzhi-bottom-list').eq(1).show();                        $('.quzhi-top-list').eq(1).addClass('ac-boxshadow').find('.quzhi-list-title').css('color','#FACD89')                    }else{                        $('.quzhi-bottom.select').find('.quzhi-bottom-list').eq(2).show();                        $('.quzhi-top-list').eq(2).addClass('ac-boxshadow').find('.quzhi-list-title').css('color','#FACD89')                    }                });                $dom.find('.quzhi-popDetail').click(function () {                    var p = pop.view({                        width: 1780,                        height: 960,                        hideTitle: true,                        zdy_class: 'general_full',                        filterContainer: '.filter_dom',                        content: '',                        success: function () {                            yuzhiPop.init(p.$ow_open_cont)                        }                    })                });            },//社区 和 人员所有排名            gridAndprople:function () {                let _this=this;                gridAndprople.init(_this.shequList);            },        }    };//阈值设置let yuzhiPop= {    init:function ($dom) {        this.$dom=$dom;        this.id='';        this.show='';        this.param={};        this.content();        this.clickfn();        this.yuzhi='';        this.yuzhi2='';    },    clickfn(){        let _this=this;        let date =new Date().getMonth()+1;        let month=$('.timeScreen-month.timeBgcolor').data('month');        let month2=$('.timeScreen-month.timeBgcolor').data('month');        this.refresh(_this.param,date);        this.$dom.find('.quzhi-screen-month').click(function () {            $('.quzhi-month-list').toggle();        });        this.$dom.find('.timeScreen-month').click(function () {            $('.timeScreen-month').removeClass('timeBgcolor');            $(this).addClass('timeBgcolor');            _this.show=$(this).data('show');            month=$(this).data('month');            _this.yuzhi='';            _this.param.month=month;            $('.data-month').html(_this.show);            $(this).parents('.quzhi-month-list').hide();            _this.refresh(_this.param,_this.show);        });        this.$dom.off('click').on('click','.quzhiPop-right-bottom-cont',function () {            _this.yuzhi=$(this).val();        });        this.$dom.off('.click').on('click',function (e) {            if(month==month2){                let exclude = _this.$dom.find('.tip_box_right');                _this.yuzhi2=$('.quzhiPop-right-bottom-cont').val();                console.log(_this.yuzhi,_this.yuzhi2);                if(_this.yuzhi2!=_this.yuzhi&&_this.yuzhi!=''&&!exclude.is(e.target) && exclude.has(e.target).length === 0){                    $('.tip_box').show();                }            }else{                $('.tip_box').hide();            }            if($('.elect-loading').is(':visible')){                $('.tip_box').hide();            }        });        this.$dom.find('.tip_box_right').click(function(){            _this.showLoading();        });        this.$dom.find('.tip_box_left').click(function(e){            _this.$dom.find('.tip_box').hide();            _this.$dom.find('.quzhiPop-right-bottom-cont').val(_this.yuzhi)        });    },    timer(status,fn) {            var hour, minute, second;//时 分 秒            hour = minute = second = 0;//初始化            var millisecond = 0;//毫秒            var that = this;            var yujing_num =  that.$dom.find('.quzhiPop-right-bottom-cont').val();            function start()//开始            {                that.loading_percent = 0;                that.loading_ok = false;                that.loading_ok_fn = null;                that.timer_id = setInterval(time,500);            }            function time()//计时            {                millisecond = millisecond + 50;                if (millisecond >= 1000) {                    millisecond = 0;                    second = second + 1;                }                if (second >= 60) {                    second = 0;                    minute = minute + 1;                }                if (minute >= 60) {                    minute = 0;                    hour = hour + 1;                }                var minutestr = minute < 10 ? '0' + minute : minute;                var secondstr = second < 10 ? '0' + second : second;                var millisecondstr  = millisecond;                if (millisecond < 10) {                    millisecondstr = '00' + millisecond;                } else if (millisecond < 100) {                    millisecondstr  = '0' + millisecond;                }                that.$dom.find('.elect-loading .time_val').text(minutestr + ':' + secondstr + '.' + millisecondstr);                that.loading_percent = that.loading_percent + parseInt(Math.random() * 2,10);                var monthArr = [];                that.$dom.find('.timeScreen-month').each(function(){                    monthArr.push($(this).data('month'))                });                that.$dom.find('.elect-loading-percent').text(that.loading_percent+'%');                var data_i = parseInt(monthArr.length * Math.random() * 3);                if(data_i >= monthArr.length){                    data_i =  monthArr.length - 1;                }                that.$dom.find('.count-data').text(monthArr[data_i]);            }            ajax_jsonp_request({                url:'http://wjjkq.dsjdeve.xbwq.com.cn/dsj_wjjkq_show/api/analysis/warning/setThreshold',                post_data:{                    type:12,                    val:yujing_num,                },                fn: function () {                    clearInterval(that.timer_id);                    that.refresh(that.param,that.show);                    that.yuzhi2='';                    that.yuzhi='';                    that.$dom.find('.elect-loading').hide();                }            });            function stop()//暂停            {                that.loading_ok = true;                that.loading_ok_fn = fn;            }            if (status) {                start();            } else {                stop();            }        },    showLoading(){            this.$dom.find('.tip_box').hide();            this.$dom.find('.elect-loading').show();            this.timer(1);        },    content () {        //时间函数，获取当前时间        let date = new Date();        let dateMonth = date.getMonth() + 1;        let tpl=`<div class="bigPop-head" >                       <div class="bigPop-head-left" style="display:flex;">                            <div class="blueShadow-big-title quzhi-sheQu">消极网格员预警阈值设置-</div>                            <div class="blueShadow-big-title quzhi-month"style="display:flex;">2018年<div class="data-month">${dateMonth}</div>月</div>                            <div class="quzhi-screen quzhi-screen-month"><i class="xb_icon caret-down"></i></div>                            <div class="timeScreen quzhi-month-list">                                <div class="zhengSanjiao"></div>                                <div class="timeScreen-title">2018</div>                                <div class="timeScreen-month-box" style="display:flex; flex-wrap: wrap">                                <div class="timeScreen-month ${dateMonth==1 ? 'timeBgcolor':''}" data-show="1" data-month="2018-01">1月</div>                                <div class="timeScreen-month ${dateMonth==2 ? 'timeBgcolor':''}" data-show="2" data-month="2018-02">2月</div>                                <div class="timeScreen-month ${dateMonth==3 ? 'timeBgcolor':''}" data-show="3" data-month="2018-03">3月</div>                                <div class="timeScreen-month ${dateMonth==4 ? 'timeBgcolor':''}" data-show="4" data-month="2018-04">4月</div>                                <div class="timeScreen-month ${dateMonth==5 ? 'timeBgcolor':''}" data-show="5" data-month="2018-05">5月</div>                                <div class="timeScreen-month ${dateMonth==6 ? 'timeBgcolor':''}" data-show="6" data-month="2018-06">6月</div>                                <div class="timeScreen-month ${dateMonth==7 ? 'timeBgcolor':''}' data-show="7" data-month="2018-07">7月</div>                                <div class="timeScreen-month ${dateMonth==8 ? 'timeBgcolor':''}' data-show="8" data-month="2018-08">8月</div>                                <div class="timeScreen-month ${dateMonth==9 ? 'timeBgcolor':''}" data-show="9" data-month="2018-09">9月</div>                                <div class="timeScreen-month ${dateMonth==10 ? 'timeBgcolor':''}" data-show="10" data-month="2018-10">10月</div>                                <div class="timeScreen-month ${dateMonth==11 ? 'timeBgcolor':''}" data-show="11" data-month="2018-11">11月</div>                                <div class="timeScreen-month ${dateMonth==12 ? 'timeBgcolor':''}" data-show="12" data-month="2018-12">12月</div>                                </div>                            </div>                       </div>                    </div>                    <div class="quzhiPop-con" style="display:flex;">                        <div class="gridyuzhi-center">                            <div class="gridyuzhi-top">                                <div class="society_title">一、模型概述</div>                                <div class="quzhiPop-left-top-cont">                                    <div class="gridyuzhi-top-left"></div>                                    <div class="gridyuzhi-top-right"></div>                                </div>                            </div>                            <div class="quzhiPop-left-bottom">                                <div class="society_title">二、阈值微调</div>                                <div class="quzhiPop-right-bottom">                                </div>                            </div>                        </div>                                            </div>                    <div class="tip_box">                    <div class="tip_box_title">提示</div>                    <div class="tip_box_cont">如更改模型的参照数据或微调阈值，则本月内的全部巡查员的预警均将重新计算。</div>                    <div class="tip_box_bot">                        <div class="tip_box_left">取消</div>                        <div class="tip_box_right">确定</div>                     </div>                    </div>                    <div class="elect-loading" style="display:none;">                                    <div class="elect-loading-bg"><img src="${baseUrl}/public/biz/decision/image/pic_scanning_white.png"></div>                                                                       <div class="elect-loading-bg2"><img src="${baseUrl}/public/biz/decision/image/pic_scanning_white.png"></div>                                                                       <div class="elect-loading-bg3"><img src="${baseUrl}/public/biz/decision/image/pic_scanning_white.png"></div>                                                                       <div class="elect-loading-bg4"><img src="${baseUrl}/public/biz/decision/image/pic_scanning_white.png"></div>                                                                       <div class="elect-loading-msg">                                        <label>正在计算：</label><span class="count-data"></span>                                    </div>                                    <div class="elect-loading-time">                                        <label>已用时：</label><span class="time_val">00:00.000</span>                                    </div>                                    <div class="elect-loading-percent">0%</div>                                </div>`;        this.$dom.html(tpl);    },    recontent(data,show){        this.id=data.list[0].id;        let topleft='',topright='';        let time1=data.list[0].showMonth;        topleft=`<div class="quzhiPop-name">${data.list[0].num}个巡查员 2018年${time1} - 个人得分 最优分割结果</div>                    <div class="leftTop-table">                        <div class="table-list"><div class="table-name">个人得分</div><div class="leftTop-table1" style="display: flex"></div></div>                         <div class="table-list"><div class="table-name">出现的次数</div><div class="leftTop-table2" style="display: flex"></div></div>                        <div class="table-list"><div class="table-name" style="border-bottom: none">占总人数的比例</div><div class="leftTop-table3" style="display: flex"></div></div>                    </div>`;        this.$dom.find('.gridyuzhi-top-left').html(topleft);        let table1='',table2='',table3='';        $.each(data.list[0].data,function (x,y) {            table1+=`<div class="table-item">${y.rangeStr}</div>`;            table2+=`<div class="table-item">${y.num}</div>`;            table3+=`<div class="table-item">${y.percent}%</div>`        });        $('.leftTop-table1').html(table1);        $('.leftTop-table2').html(table2);        $('.leftTop-table3').html(table3);        $('.leftTop-table1').find('.table-item:last').addClass('font-yellow');        $('.leftTop-table2').find('.table-item:last').addClass('font-yellow');        $('.leftTop-table3').find('.table-item:last').addClass('font-yellow');        topright=`<div class="quzhiPop-name">层级分类结果显示:</div>                    <div class="quzhiPop-right-list"><span class="border_yellow"></span>${time1}有 ${data.instructionslt60.lt60DayNum}人 ，个人得分在${data.instructionsGt60.thresholdValue}分以下，占比${data.instructionslt60.lt60Percent}%；</div>                    <div class="quzhiPop-right-list"><span class="border_yellow"></span>${time1}有 ${data.instructionsGt60.gt60DayNum}人 ，个人得分在${data.instructionsGt60.thresholdValue}分以上，占比${data.instructionsGt60.gt60Percent}%；</div>                    <div class="quzhiPop-right-result">采用最优分割后体量最大群落的下限值作为阈值，所以初步把 ${data.instructionsGt60.thresholdValue}分 作为巡查员${show}份的报警阈值。</div>`;        this.$dom.find('.gridyuzhi-top-right').html(topright);        let rightBottom='';        rightBottom=`<div class="quzhiPop-name">自定义报警阈值</div>             <input class="quzhiPop-right-bottom-cont" value="${data.thresholdNum.num}">`;        this.$dom.find('.quzhiPop-right-bottom').html(rightBottom)    },    refresh (param,show) {        let _this=this;        ajax_jsonp_request({            url: common_module_conf.project_conf.show.host+'/api/analysis/warning/negativeWarningModel',            post_data: param,            fn: function (data) {                $('.gridyuzhi-center').show();                _this.recontent(data,show)            },            err_fn:function () {                $('.gridyuzhi-center').hide();            },        });    },};//社区 和 人员所有排名let gridAndprople={    init:function(data) {        let _this=this;        window.p = pop.view({            width: 1780,            height: 960,            hideTitle: true,            zdy_class: 'general_full',            filterContainer: '.filter_dom',            content: '',            success: function () {                ajax_jsonp_request({                    url:common_module_conf.project_conf.show.host+'/api/analysis/warning/negativeRanking',                    fn:function(data2){                        console.log(data2);                        _this.popDetail(p.$ow_open_cont,data,data2)                    }                });            },        });    },    popDetail:function ($dom,data,data2) {        let tpl='';        tpl=`    <div class="ad_cont_left">                    <div class="society_title">各社区消极网格员预警统计</div>                    <div class="common_list">                        <div class='common_list_head'>                            <div class='common_list_list '>                                <div class="common_list_item ">社区名称</div>                                <div class="common_list_item">当前预警数</div>                                <div class="common_list_item ">总预警数</div>                                <div class="gridpop-detail"></div>                            </div>                         </div>                        <div class='ad_cont_cont common_list_cont'>                        </div>                    </div>                    </div>                     <div class="ad_cont_right">                     <div class="society_title">消极网格员预警排名</div>                     <div class="common_list">                        <div class='common_list_head'>                            <div class='common_list_list '>                                <div class="common_list_item">社区名称</div>                                <div class="common_list_item">当前预警数</div>                                <div class="common_list_item">总预警数</div>                                <div class="common_list_item">上月分数</div>                                <div class="common_list_item">历史平均分数</div>                                <div class="gridpop-detail"></div>                            </div>                         </div>                        <div class='ad_cont_cont2 common_list_cont'>                        </div>                     </div>                </div>`;        $dom.html(tpl);        this.makeItem(data,$dom);        this.makeItem2(data2,$dom);        let code='';//社区人员排名        $('.shequ-PeoRank').click(function () {            code= $(this).data('id');            gridRank.init(code)        });// 个人详情        $('.person-Detail').click(function(){            let code = $(this).data('code');            var p = pop.view({                width: 1780,                height: 960,                hideTitle: true,                zdy_class: 'general_full',                filterContainer: '.filter_dom',                content: '',                success: function () {                    ajax_jsonp_request({                        url:common_module_conf.project_conf.show.host+'/api/analysis/warning/negativeDetailsToHead',                        post_data:{                            code:code,                        },                        fn:function(data){                            GridPop.init(p.$ow_open_cont,data,code)                        }                    });                }            });        })    },    makeItem:function (data,$dom) {        let mid='';        $.each(data,function (i,n) {            mid += ` <div class='common_list_list'>                            <div class="common_list_item" title="${n.name}">${n.name}</div>                            <div class="common_list_item" title="${n.currentNum}">${n.currentNum}</div>                            <div class="common_list_item" title="${n.totalNum}">${n.totalNum}</div>                            <div class="gridpop-detail shequ-PeoRank" data-id="${n.name}"><img src="${baseUrl}/public/biz/index/image/home_btn_icon_deep.svg"></div>                         </div> `        });        $dom.find('.ad_cont_cont').html(mid);    },    makeItem2:function (data,$dom) {        let mid='';        $.each(data.list,function (i,n) {            mid += ` <div class='common_list_list'>                            <div class="common_list_item" title="${n.showName}">${n.showName}</div>                            <div class="common_list_item" title="${n.num}">${n.num}</div>                            <div class="common_list_item" title="${n.totalNum}">${n.totalNum}</div>                            <div class="common_list_item" title="${n.lastMonthScore}">${n.lastMonthScore}</div>                            <div class="common_list_item" title="${n.avgScore}">${n.avgScore}</div>                            <div class="gridpop-detail person-Detail" data-code="${n.name}"><img src="${baseUrl}/public/biz/index/image/home_btn_icon_deep.svg"></div>                         </div> `        });        $dom.find('.ad_cont_cont2').html(mid);    },};